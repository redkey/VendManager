@page "/viewusers"
@using VendManager.BlazorUI.Services.Base
<h3>ViewUsers</h3>

<DxButton CssClass="my-4" Text="CREATE USER" @onclick="CreateUser"></DxButton>

<DxLoadingPanel Visible="@isLoading" />
<DxGrid Data="Users"
        ShowFilterRow="true">
    <Columns>
        <DxGridDataColumn FieldName="Email" />
        <DxGridDataColumn FieldName="FirstName" />
        <DxGridDataColumn FieldName="LastName" />
        <DxGridDataColumn Caption="Actions" Width="80px">
            <CellDisplayTemplate>
               
                <a href="" @onclick:preventDefault  title="Edit">
                    <i class="fas fa-info"></i>
                </a>

                <a href="" @onclick:preventDefault @onclick="() => DeactivateUserTest(true, ((User)context.DataItem).Id)" title="Delete">
                    <i class="fas fa-trash"></i>
                </a>
            </CellDisplayTemplate>
        </DxGridDataColumn>
    </Columns>

</DxGrid>

<DxPopup @bind-Visible="@Visible" HeaderText="Confirm Delete" BodyText="Are you sure you want to delete?" ShowFooter="true" ShowCloseButton="false" HorizontalAlignment="HorizontalAlignment.Center" AllowDrag="true">
    <FooterContentTemplate>
        <DxButton CssClass="popup-button my-1 ms-2" RenderStyle="ButtonRenderStyle.Primary" Text="OK" Click="DeleteUser" />
        <DxButton CssClass="popup-button my-1 ms-2" RenderStyle="ButtonRenderStyle.Secondary" Text="Cancel" Click="@context.CloseCallback" />
    </FooterContentTemplate>
</DxPopup>


